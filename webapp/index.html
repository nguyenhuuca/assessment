<!DOCTYPE html>
<html lang="en">
<head>
  <title>Funny Movies</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#007bff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="./css/assessment.css">
  <script src="./js/auth.js"></script>
  <script src="./js/assessment.js"></script>
</head>
<body>
  <!-- Theme toggle button -->
  <div class="theme-toggle" onclick="toggleTheme()">
    <i class="fas fa-moon"></i>
  </div>

  <div class="container app-container">
    <div class="row app-header">
      <div class="app-header__wrapper">
        <h1><i class="fas fa-film me-2"></i>Funny Movies</h1>
      </div>
      <div class="app-header__wrapper">
        <form class="app-header__form">
          <div id="messageInfo" class="app-header__form-item">Welcome nguyenhuuca@gmailcom</div>
          <div id="grUser" class="app-header__form-item">
            <input type="email" placeholder="Email" class="form-control" id="usr">
          </div>
          <div id="grPass" class="app-header__form-item">
            <input type="password" placeholder="Password" class="form-control" id="pwd">
          </div>
          <div class="app-header__form-item">
            <button id="shareBtn" type="button" class="btn btn-light" data-bs-toggle="modal" data-bs-target="#shareModal">
              <i class="fas fa-share-alt me-2"></i>Share a movie
            </button>
            <button id="loginBtn" onclick="joinSystem()" type="button" class="btn btn-light">
              <span id="loginSpinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              <i class="fas fa-sign-in-alt me-2"></i>Register / Login
            </button>
            <button id="logoutBtn" onclick="logout()" type="button" class="btn btn-light">
              <i class="fas fa-sign-out-alt me-2"></i>Logout
            </button>
          </div>
        </form>
      </div>
    </div>
    <hr>
    <div class="app-error-msg" id="errMsg">Error message</div>
    
    <!-- Add tabs -->
    <ul class="nav nav-tabs mb-3" id="videoTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="popular-tab" data-bs-toggle="tab" data-bs-target="#popular" type="button" role="tab" aria-controls="popular" aria-selected="false">Video Popular</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="funny-tab" data-bs-toggle="tab" data-bs-target="#funny" type="button" role="tab" aria-controls="funny" aria-selected="false">Video Funny</button>
      </li>
    </ul>
    
    <div class="tab-content" id="videoTabsContent">
      <div class="tab-pane fade show active" id="popular" role="tabpanel" aria-labelledby="popular-tab">
        <div id="list-video-popular"></div>
      </div>
      <div class="tab-pane fade" id="funny" role="tabpanel" aria-labelledby="funny-tab">
        <div id="list-video-funny"></div>
      </div>
    </div>
  </div>

  <!-- Share Modal -->
  <div class="modal fade" id="shareModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="shareModalLabel">
            <i class="fas fa-share-alt me-2"></i>Share a Youtube movie
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form>
            <div class="mb-3">
              <label for="urlYoutube" class="form-label">
                <i class="fab fa-youtube me-2"></i>Youtube URL:
              </label>
              <input type="url" class="form-control" id="urlYoutube" placeholder="https://www.youtube.com/watch?v=...">
            </div>
            <button type="button" class="btn btn-share" onclick="share()">
              <span id="shareSpinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
              Share Video
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    // load all when init page
    initState();
    loadData();
    initTheme();
  </script>
</body>
</html>